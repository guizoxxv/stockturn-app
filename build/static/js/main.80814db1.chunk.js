(this["webpackJsonpproducts-front"]=this["webpackJsonpproducts-front"]||[]).push([[0],{100:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(40),r=a.n(s),l=(a(100),a(21)),i=a(10),o=a(2),d=a.n(o),j=a(3),u=a(5),b=a(4);function m(e){var t={};return e.inner.forEach((function(e){var a,c=null===(a=e.path)||void 0===a?void 0:a.split(".");c&&(t[c[0]]=e.message)})),t}var p=a(8),O=a(9),h=a(14),x=a.n(h),v=".local.test",f="https://stockturn-api.guizo.dev.br",g="@".concat("productApp",":flashMessage"),N=a(59);function k(){return(k=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(f+"/sanctum/csrf-cookie");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(d.a.mark((function e(t){var a,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,c=t.password,e.next=3,x.a.post(f+"/login",{email:a.trim(),password:c.trim()});case 3:return e.next=5,C();case 5:return n=e.sent,e.abrupt("return",{username:n.name,email:n.email});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(f+"/api/user");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(f+"/logout");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?"?"+N.stringify(t):"",e.next=3,x.a.get(f+"/api/products".concat(a));case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.delete(f+"/api/products/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(f+"/api/products",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.put(f+"/api/products/".concat(t.id),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?"?"+N.stringify(t):"",e.next=3,x.a.get(f+"/api/uploads".concat(a));case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(f+"/api/uploads",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=a(250),B=a(0),K=Object(c.createContext)({}),H=function(e){var t=e.children,a=Object(A.a)(["XSRF-TOKEN","stockturn_api_session"]),n=Object(b.a)(a,3),s=n[0],r=n[2],l=Object(c.useState)({}),i=Object(b.a)(l,2),o=i[0],j=i[1],m=Object(c.useState)(!1),p=Object(b.a)(m,2),O=p[0],h=p[1],x=Object(c.useCallback)((function(){r("XSRF-TOKEN",{path:"/",domain:v}),r("stockturn_api_session",{path:"/",domain:v})}),[r]);Object(c.useEffect)((function(){s["XSRF-TOKEN"]?O||C().then((function(e){h(!0),j({username:e.name,email:e.email})})).catch((function(e){console.log("Fail to get logged user. Clearing cookies."),x(),j({})})):function(){return k.apply(this,arguments)}().catch((function(e){console.log("Fail to set cookie.")}))}));var f=Object(c.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:a=e.sent,j(a),h(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),g=Object(c.useCallback)(Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:return e.prev=8,x(),j({}),h(!1),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])}))),[x]);return Object(B.jsx)(K.Provider,{value:{logged:O,authData:o,login:f,logout:g},children:t})};function G(){var e=localStorage.getItem(g);if(e){var t=JSON.parse(e),a=t.level,c=t.message;Object(O.a)(c,{type:a||"info"}),localStorage.removeItem(g)}}var J=a(11),X=a(12),Y=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(b.a)(s,2),l=r[0],i=r[1],o=Object(c.useState)(null),h=Object(b.a)(o,2),x=h[0],v=h[1],f=Object(c.useContext)(K).login;function g(){return(g=Object(u.a)(d.a.mark((function e(t){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c=p.d().shape({email:p.e().email().required(),password:p.e().required()}),e.next=5,c.validate({email:a,password:l},{abortEarly:!1});case 5:return e.next=7,f({email:a,password:l});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0 instanceof p.a?(n=m(e.t0),v(n)):O.a.error("Fail to login");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){G()}),[]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{className:"text-center mb-0",children:[Object(B.jsx)(J.a,{icon:X.a,size:"5x"}),Object(B.jsx)("h5",{children:"Products App"})]}),Object(B.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(B.jsx)("form",{className:"card",onSubmit:function(e){return g.apply(this,arguments)},children:Object(B.jsxs)("div",{className:"card-body",children:[Object(B.jsxs)("div",{className:"form-group mb-3",children:[Object(B.jsx)("label",{htmlFor:"email",className:"mb-0",children:Object(B.jsxs)("small",{children:["Email",Object(B.jsx)("span",{className:"text-danger",children:"*"})]})}),Object(B.jsx)("input",{id:"username",type:"text",className:"form-control ".concat((null===x||void 0===x?void 0:x.email)?"is-invalid":""),value:a,onChange:function(e){return t=e.target.value,(null===x||void 0===x?void 0:x.email)&&v(Object(j.a)(Object(j.a)({},x),{},{email:""})),void n(t);var t}}),(null===x||void 0===x?void 0:x.email)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:x.email})})]}),Object(B.jsxs)("div",{className:"form-group mb-3",children:[Object(B.jsx)("label",{htmlFor:"password",className:"mb-0",children:Object(B.jsxs)("small",{children:["Password",Object(B.jsx)("span",{className:"text-danger",children:"*"})]})}),Object(B.jsx)("input",{id:"password",type:"password",className:"form-control ".concat((null===x||void 0===x?void 0:x.password)?"is-invalid":""),value:l,onChange:function(e){return t=e.target.value,(null===x||void 0===x?void 0:x.password)&&v(Object(j.a)(Object(j.a)({},x),{},{password:""})),void i(t);var t}}),(null===x||void 0===x?void 0:x.password)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:x.password})})]}),Object(B.jsx)("div",{className:"text-center",children:Object(B.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})})]})})})]})},W=a(7),$=a.n(W),Q=function(){var e=Object(c.useContext)(K).logout,t=function(){var t=Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return $()("#logoutModal").modal("hide"),t.next=3,e();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(B.jsx)("div",{className:"modal fade",id:"logoutModal",tabIndex:-1,"aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsx)("div",{className:"text-center",children:"Confirm logout?"})}),Object(B.jsxs)("div",{className:"modal-footer justify-content-center",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"No"}),Object(B.jsx)("button",{type:"button",className:"btn btn-success",onClick:t,children:"Yes"})]})]})})})},Z=function(){var e=Object(c.useContext)(K).authData,t=Object(i.g)().pathname;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("header",{className:"mb-4",children:Object(B.jsx)("nav",{className:"navbar navbar-expand-sm navbar-light bg-white shadow-sm",children:Object(B.jsxs)("div",{className:"container",children:[Object(B.jsx)(l.b,{className:"navbar-brand",to:"/",children:Object(B.jsx)(J.a,{icon:X.a,size:"2x"})}),Object(B.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(B.jsx)("span",{className:"navbar-toggler-icon"})}),Object(B.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(B.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(B.jsx)("li",{className:"nav-item ".concat("/"===t?"active":""),children:Object(B.jsx)(l.b,{className:"nav-link",to:"/",children:"Products"})}),Object(B.jsx)("li",{className:"nav-item ".concat("/uploads"===t?"active":""),children:Object(B.jsx)(l.b,{className:"nav-link",to:"/uploads",children:"Uploads"})})]}),Object(B.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(B.jsxs)("li",{className:"nav-item dropdown",children:[Object(B.jsxs)("button",{id:"navbarDropdown",className:"btn btn-outline-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[e.username," ",Object(B.jsx)("span",{className:"caret"})]}),Object(B.jsx)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown",children:Object(B.jsx)("button",{className:"dropdown-item","data-toggle":"modal","data-target":"#logoutModal",children:"Logout"})})]})})]})]})})}),Object(B.jsx)(Q,{})]})},ee=Object(c.createContext)({}),te=function(e){var t=e.children,a=Object(c.useState)({}),n=Object(b.a)(a,2),s=n[0],r=n[1];return Object(B.jsx)(ee.Provider,{value:{pagination:s,setPagination:r},children:t})},ae=Object(c.createContext)({}),ce=function(e){var t=e.children,a=Object(c.useState)([]),n=Object(b.a)(a,2),s=n[0],r=n[1],l=Object(c.useState)({}),i=Object(b.a)(l,2),o=i[0],j=i[1],m=Object(c.useContext)(ee).setPagination,p=Object(c.useCallback)(Object(u.a)(d.a.mark((function e(){var t,a,c,n,s,l,i,j,u,b,p,h,x,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(o);case 3:t=e.sent,a=t.data,c=t.current_page,n=t.first_page_url,s=t.from,l=t.last_page,i=t.last_page_url,j=t.links,u=t.next_page_url,b=t.path,p=t.per_page,h=t.prev_page_url,x=t.to,v=t.total,r(a),m({current_page:c,first_page_url:n,from:s,last_page:l,last_page_url:i,links:j,next_page_url:u,path:b,per_page:p,prev_page_url:h,to:x,total:v}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O.a.error("Fail to get products");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[o,m]),h=Object(c.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:return e.next=5,p();case 5:O.a.success("Product deleted"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O.a.error("Fail to delete product");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[p]),x=Object(c.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:return e.next=5,p();case 5:O.a.success("Product created"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O.a.error("Fail to create product");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[p]),v=Object(c.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:return e.next=5,p();case 5:O.a.success("Product updated"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O.a.error("Fail to update product");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[p]);return Object(B.jsx)(ae.Provider,{value:{products:s,filters:o,setFilters:j,getProducts:p,deleteProduct:h,createProduct:x,editProduct:v},children:t})},ne=function(e){var t=e.product;return Object(B.jsx)("div",{className:"modal fade",id:"viewProductModal",tabIndex:-1,"aria-labelledby":"viewProductModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"viewProductModalLabel",children:"View Product"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsxs)("div",{className:"modal-body",children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Id:"})," ",Object(B.jsx)("span",{children:t.id})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Name:"})," ",Object(B.jsx)("span",{children:t.name})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"SKU:"})," ",Object(B.jsx)("span",{children:t.sku})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Price:"})," ",Object(B.jsx)("span",{children:t.price})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Stock:"})," ",Object(B.jsx)("span",{children:t.stock})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Creation date:"})," ",Object(B.jsx)("span",{children:new Date(t.created_at).toLocaleString()})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Last update date:"})," ",Object(B.jsx)("span",{children:new Date(t.updated_at).toLocaleString()})]})]})]})})})},se=function(e){var t=e.product,a=Object(c.useContext)(ae).deleteProduct,n=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.id);case 2:$()("#deleteProductModal").modal("hide");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsx)("div",{className:"modal fade",id:"deleteProductModal",tabIndex:-1,"aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("div",{className:"text-center",children:['Confirm product "',t.name,'" deletion?']})}),Object(B.jsxs)("div",{className:"modal-footer justify-content-center",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"No"}),Object(B.jsx)("button",{type:"button",className:"btn btn-success",onClick:n,children:"Yes"})]})]})})})},re=function(e){var t=e.product,a=Object(c.useContext)(ae).editProduct,n=Object(c.useState)(""),s=Object(b.a)(n,2),r=s[0],l=s[1],i=Object(c.useState)(""),o=Object(b.a)(i,2),h=o[0],x=o[1],v=Object(c.useState)(""),f=Object(b.a)(v,2),g=f[0],N=f[1],k=Object(c.useState)(null),w=Object(b.a)(k,2),y=w[0],C=w[1];function S(){return(S=Object(u.a)(d.a.mark((function e(c){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,n=p.d().shape({name:p.e().notRequired(),price:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().positive(),stock:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().integer().positive()}),e.next=5,n.validate({name:r,price:h,stock:g},{abortEarly:!1});case 5:return e.next=7,a({id:t.id,name:r,price:parseFloat(h),stock:parseInt(g)});case 7:$()("#editProductModal").modal("hide"),P(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0 instanceof p.a?(s=m(e.t0),C(s)):O.a.error("Invalid form data");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function P(){l(""),x(""),N("")}return Object(c.useEffect)((function(){t.name&&l(t.name),t.price&&x(t.price.toString()),t.stock&&N(t.stock.toString())}),[t]),Object(B.jsx)("div",{className:"modal fade",id:"editProductModal",tabIndex:-1,"aria-labelledby":"editProductModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"editProductModalLabel",children:"Edit Product"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("form",{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"name",className:"mb-0",children:Object(B.jsx)("small",{children:"Name"})}),Object(B.jsx)("input",{id:"name",type:"text",className:"form-control ".concat((null===y||void 0===y?void 0:y.name)?"is-invalid":""),value:r,onChange:function(e){return t=e.target.value,(null===y||void 0===y?void 0:y.name)&&C(Object(j.a)(Object(j.a)({},y),{},{name:""})),void l(t);var t}}),(null===y||void 0===y?void 0:y.name)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:y.name})})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"price",className:"mb-0",children:Object(B.jsx)("small",{children:"Price"})}),Object(B.jsx)("input",{id:"price",type:"number",className:"form-control ".concat((null===y||void 0===y?void 0:y.price)?"is-invalid":""),value:h,onChange:function(e){return t=e.target.value,(null===y||void 0===y?void 0:y.price)&&C(Object(j.a)(Object(j.a)({},y),{},{price:""})),void x(t);var t}}),(null===y||void 0===y?void 0:y.price)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:y.price})})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"stock",className:"mb-0",children:Object(B.jsx)("small",{children:"Stock"})}),Object(B.jsx)("input",{id:"stock",type:"number",className:"form-control ".concat((null===y||void 0===y?void 0:y.stock)?"is-invalid":""),value:g,onChange:function(e){return t=e.target.value,(null===y||void 0===y?void 0:y.stock)&&C(Object(j.a)(Object(j.a)({},y),{},{stock:""})),void N(t);var t}}),(null===y||void 0===y?void 0:y.stock)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:y.stock})})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-around form-group mb-0",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"Cancel"}),Object(B.jsx)("button",{type:"submit",className:"btn btn-success",children:"Update"})]})]})})]})})})},le=a(94),ie=function(e){var t=e.product,a=t.stockTimeline,c=[],n=[];null===a||void 0===a||a.forEach((function(e){var t=new Date(e.date).toLocaleDateString();c.push(e.stock),n.push(t)}));var s={labels:n,datasets:[{data:c,backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"],borderWidth:1}]};return Object(B.jsx)("div",{className:"modal fade",id:"viewStockTimelineModal",tabIndex:-1,"aria-labelledby":"viewStockTimelineModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"viewStockTimelineModalLabel",children:"View Stock Timeline"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsxs)("div",{className:"modal-body",children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Id:"})," ",Object(B.jsx)("span",{children:t.id})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Name:"})," ",Object(B.jsx)("span",{children:t.name})]}),Object(B.jsx)("div",{className:"mt-3",children:c.length>0?Object(B.jsx)(le.Line,{data:s,options:{legend:{display:!1}}}):Object(B.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(B.jsx)("div",{className:"alert alert-warning",role:"alert",children:"No data available"})})})]})]})})})},oe=function(){var e=Object(c.useContext)(ae),t=e.products,a=e.getProducts,n=Object(c.useState)({}),s=Object(b.a)(n,2),r=s[0],l=s[1];Object(c.useEffect)((function(){a()}),[a]);var i=Object(c.useCallback)((function(e){l(e),$()("#viewProductModal").modal("show")}),[]),o=Object(c.useCallback)((function(e){l(e),$()("#deleteProductModal").modal("show")}),[]),d=Object(c.useCallback)((function(e){l(e),$()("#editProductModal").modal("show")}),[]),j=Object(c.useCallback)((function(e){l(e),$()("#viewStockTimelineModal").modal("show")}),[]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("table",{className:"table table-bordered table-striped table-hover table-responsive-sm",children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{className:"text-center",children:[Object(B.jsx)("th",{scope:"col",children:"Id"}),Object(B.jsx)("th",{scope:"col",children:"Name"}),Object(B.jsx)("th",{scope:"col",children:"Price ($)"}),Object(B.jsx)("th",{scope:"col",children:"Stock"}),Object(B.jsx)("th",{scope:"col",children:"Creation Date"}),Object(B.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(B.jsx)("tbody",{children:t.map((function(e){return Object(B.jsxs)("tr",{className:"text-center",children:[Object(B.jsx)("th",{scope:"row",className:"text-center",children:e.id}),Object(B.jsx)("td",{children:e.name}),Object(B.jsx)("td",{children:e.price}),Object(B.jsx)("td",{children:e.stock}),Object(B.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),Object(B.jsxs)("td",{children:[Object(B.jsx)("button",{className:"btn btn-sm btn-primary m-1",title:"View",onClick:function(){return i(e)},children:Object(B.jsx)(J.a,{icon:X.f,size:"1x"})}),Object(B.jsx)("button",{className:"btn btn-sm btn-warning m-1",title:"View stock timeline",onClick:function(){return j(e)},children:Object(B.jsx)(J.a,{icon:X.b,size:"1x"})}),Object(B.jsx)("button",{className:"btn btn-sm btn-secondary m-1",title:"Edit",onClick:function(){return d(e)},children:Object(B.jsx)(J.a,{icon:X.h,size:"1x"})}),Object(B.jsx)("button",{className:"btn btn-sm btn-danger m-1",title:"Delete",onClick:function(){return o(e)},children:Object(B.jsx)(J.a,{icon:X.k,size:"1x"})})]})]},e.id)}))})]}),Object(B.jsx)(ne,{product:r}),Object(B.jsx)(se,{product:r}),Object(B.jsx)(re,{product:r}),Object(B.jsx)(ie,{product:r})]})},de=function(){var e,t=Object(c.useContext)(ee).pagination,a=Object(c.useContext)(ae),n=a.filters,s=a.setFilters,r=Object(c.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(Object(j.a)(Object(j.a)({},n),{},{page:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,s]);return Object(B.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(B.jsx)("nav",{"aria-label":"Products pagination",children:Object(B.jsxs)("ul",{className:"pagination",children:[Object(B.jsx)("li",{className:"page-item",title:"First page",children:Object(B.jsx)("button",{className:"page-link","aria-label":"Previous",onClick:function(){return r(1)},children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),null===t||void 0===t||null===(e=t.links)||void 0===e?void 0:e.filter((function(e){return parseInt(e.label)})).map((function(e,t){return Object(B.jsx)("li",{className:"page-item ".concat(e.active?"active":""," ").concat(e.url?"":"disabled"),children:Object(B.jsx)("button",{className:"page-link",onClick:function(){return r(parseInt(e.label))},dangerouslySetInnerHTML:{__html:e.label}})},t)})),Object(B.jsx)("li",{className:"page-item",title:"Last page",children:Object(B.jsx)("button",{className:"page-link","aria-label":"Next",onClick:function(){return r(t.last_page)},children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})})},je=function(){var e=Object(c.useContext)(ae).createProduct,t=Object(c.useState)(""),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),l=Object(b.a)(r,2),i=l[0],o=l[1],h=Object(c.useState)(""),x=Object(b.a)(h,2),v=x[0],f=x[1],g=Object(c.useState)(null),N=Object(b.a)(g,2),k=N[0],w=N[1];function y(){return(y=Object(u.a)(d.a.mark((function t(a){var c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,c=p.d().shape({name:p.e().required(),price:p.c().transform((function(e){return isNaN(e)?void 0:e})).required().positive(),stock:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().integer().positive()}),t.next=5,c.validate({name:n,price:i,stock:v},{abortEarly:!1});case 5:return t.next=7,e({name:n,price:parseFloat(i),stock:parseInt(v)||void 0});case 7:$()("#createProductModal").modal("hide"),C(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),t.t0 instanceof p.a?(s=m(t.t0),w(s)):O.a.error("Invalid form data");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}function C(){s(""),o(""),f("")}return Object(B.jsx)("div",{className:"modal fade",id:"createProductModal",tabIndex:-1,"aria-labelledby":"createProductModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"createProductModalLabel",children:"Create Product"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"name",className:"mb-0",children:Object(B.jsxs)("small",{children:["Name",Object(B.jsx)("span",{className:"text-danger",children:"*"})]})}),Object(B.jsx)("input",{id:"name",type:"text",className:"form-control ".concat((null===k||void 0===k?void 0:k.name)?"is-invalid":""),value:n,onChange:function(e){return t=e.target.value,(null===k||void 0===k?void 0:k.name)&&w(Object(j.a)(Object(j.a)({},k),{},{name:""})),void s(t);var t}}),(null===k||void 0===k?void 0:k.name)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:k.name})})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"price",className:"mb-0",children:Object(B.jsxs)("small",{children:["Price",Object(B.jsx)("span",{className:"text-danger",children:"*"})]})}),Object(B.jsx)("input",{id:"price",type:"number",className:"form-control ".concat((null===k||void 0===k?void 0:k.price)?"is-invalid":""),value:i,onChange:function(e){return t=e.target.value,(null===k||void 0===k?void 0:k.price)&&w(Object(j.a)(Object(j.a)({},k),{},{price:""})),void o(t);var t}}),(null===k||void 0===k?void 0:k.price)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:k.price})})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"stock",className:"mb-0",children:Object(B.jsx)("small",{children:"Stock"})}),Object(B.jsx)("input",{id:"stock",type:"number",className:"form-control ".concat((null===k||void 0===k?void 0:k.stock)?"is-invalid":""),value:v,onChange:function(e){return t=e.target.value,(null===k||void 0===k?void 0:k.stock)&&w(Object(j.a)(Object(j.a)({},k),{},{stock:""})),void f(t);var t}}),(null===k||void 0===k?void 0:k.stock)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:k.stock})})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-around form-group mb-0",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"Cancel"}),Object(B.jsx)("button",{type:"submit",className:"btn btn-success",children:"Create"})]})]})})]})})})},ue=function(){var e=Object(c.useContext)(ae),t=e.filters,a=e.setFilters,n=Object(c.useState)(t.name||""),s=Object(b.a)(n,2),r=s[0],l=s[1],i=Object(c.useState)(t.sku||""),o=Object(b.a)(i,2),h=o[0],x=o[1],v=Object(c.useState)(t.fromPrice||""),f=Object(b.a)(v,2),g=f[0],N=f[1],k=Object(c.useState)(t.toPrice||""),w=Object(b.a)(k,2),y=w[0],C=w[1],S=Object(c.useState)(t.fromStock||""),P=Object(b.a)(S,2),F=P[0],_=P[1],D=Object(c.useState)(t.toStock||""),M=Object(b.a)(D,2),L=M[0],I=M[1],E=Object(c.useState)(t.fromDate||""),R=Object(b.a)(E,2),z=R[0],T=R[1],q=Object(c.useState)(t.toDate||""),U=Object(b.a)(q,2),V=U[0],A=U[1],K=Object(c.useState)(null),H=Object(b.a)(K,2),G=H[0],J=H[1];function X(){return(X=Object(u.a)(d.a.mark((function e(t){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c=p.d().shape({name:p.e().notRequired(),sku:p.e().notRequired(),fromPrice:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().positive(),toPrice:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().positive(),fromStock:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().positive(),toStock:p.c().transform((function(e){return isNaN(e)?void 0:e})).notRequired().positive(),fromDate:p.b().transform((function(e){return isNaN(Date.parse(e))?void 0:e})).notRequired(),toDate:p.b().transform((function(e){return isNaN(Date.parse(e))?void 0:e})).notRequired()}),e.next=5,c.validate({name:r,sku:h,fromPrice:g,toPrice:y,fromStock:F,toStock:L,fromDate:z,toDate:V},{abortEarly:!1});case 5:return e.next=7,a(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},r&&{name:r}),h&&{sku:h}),g&&{fromPrice:g}),y&&{toPrice:y}),F&&{fromStock:F}),L&&{toStock:L}),z&&{fromDate:z}),V&&{toDate:V}));case 7:$()("#filterProductModal").modal("hide"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0 instanceof p.a?(n=m(e.t0),J(n)):O.a.error("Invalid form data");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Y(){return(Y=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({}),l(""),x(""),N(""),C(""),_(""),I(""),T(""),A("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){t.name&&l(t.name)}),[t]),Object(B.jsx)("div",{className:"modal fade",id:"filterProductModal",tabIndex:-1,"aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsx)("div",{className:"modal-header",children:Object(B.jsx)("h5",{className:"modal-title",id:"filterProductModalLabel",children:"Filter Products"})}),Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("form",{onSubmit:function(e){return X.apply(this,arguments)},children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"name",className:"mb-0",children:Object(B.jsx)("small",{children:"Name"})}),Object(B.jsx)("input",{id:"name",type:"text",className:"form-control ".concat((null===G||void 0===G?void 0:G.name)?"is-invalid":""),value:r,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.name)&&J(Object(j.a)(Object(j.a)({},G),{},{name:""})),void l(t);var t}}),(null===G||void 0===G?void 0:G.name)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:G.name})})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"sku",className:"mb-0",children:Object(B.jsx)("small",{children:"SKU"})}),Object(B.jsx)("input",{id:"name",type:"text",className:"form-control ".concat((null===G||void 0===G?void 0:G.sku)?"is-invalid":""),value:h,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.sku)&&J(Object(j.a)(Object(j.a)({},G),{},{sku:""})),void x(t);var t}}),(null===G||void 0===G?void 0:G.sku)&&Object(B.jsx)("span",{className:"invalid-feedback",role:"alert",children:Object(B.jsx)("strong",{children:G.sku})})]}),Object(B.jsxs)("div",{className:"form-row mb-3 is-invalid",children:[Object(B.jsxs)("div",{className:"col",children:[Object(B.jsx)("label",{htmlFor:"fromPrice",className:"mb-0",children:Object(B.jsx)("small",{children:"From price"})}),Object(B.jsx)("input",{id:"fromPrice",className:"form-control",type:"number",value:g,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.fromPrice)&&J(Object(j.a)(Object(j.a)({},G),{},{fromPrice:""})),void N(t);var t}}),(null===G||void 0===G?void 0:G.fromPrice)&&Object(B.jsx)("span",{className:"invalid-feedback d-inline-block",role:"alert",children:Object(B.jsx)("strong",{children:G.fromPrice})})]}),Object(B.jsxs)("div",{className:"col",children:[Object(B.jsx)("label",{htmlFor:"toPrice",className:"mb-0",children:Object(B.jsx)("small",{children:"To price"})}),Object(B.jsx)("input",{id:"toPrice",className:"form-control",type:"number",value:y,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.toPrice)&&J(Object(j.a)(Object(j.a)({},G),{},{toPrice:""})),void C(t);var t}}),(null===G||void 0===G?void 0:G.toPrice)&&Object(B.jsx)("span",{className:"invalid-feedback d-inline-block",role:"alert",children:Object(B.jsx)("strong",{children:G.toPrice})})]})]}),Object(B.jsxs)("div",{className:"form-row mb-3",children:[Object(B.jsxs)("div",{className:"col",children:[Object(B.jsx)("label",{htmlFor:"fromStock",className:"mb-0",children:Object(B.jsx)("small",{children:"From stock"})}),Object(B.jsx)("input",{id:"fromStock",className:"form-control",type:"number",value:F,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.fromStock)&&J(Object(j.a)(Object(j.a)({},G),{},{fromStock:""})),void _(t);var t}}),(null===G||void 0===G?void 0:G.fromStock)&&Object(B.jsx)("span",{className:"invalid-feedback d-inline-block",role:"alert",children:Object(B.jsx)("strong",{children:G.fromStock})})]}),Object(B.jsxs)("div",{className:"col",children:[Object(B.jsx)("label",{htmlFor:"toStock",className:"mb-0",children:Object(B.jsx)("small",{children:"To stock"})}),Object(B.jsx)("input",{id:"toStock",className:"form-control",type:"number",value:L,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.toStock)&&J(Object(j.a)(Object(j.a)({},G),{},{toStock:""})),void I(t);var t}}),(null===G||void 0===G?void 0:G.toStock)&&Object(B.jsx)("span",{className:"invalid-feedback d-inline-block",role:"alert",children:Object(B.jsx)("strong",{children:G.toStock})})]})]}),Object(B.jsxs)("div",{className:"form-row mb-3",children:[Object(B.jsxs)("div",{className:"col",children:[Object(B.jsx)("label",{htmlFor:"fromDate",className:"mb-0",children:Object(B.jsx)("small",{children:"From date"})}),Object(B.jsx)("input",{id:"fromDate",className:"form-control",type:"date",value:z,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.fromDate)&&J(Object(j.a)(Object(j.a)({},G),{},{fromDate:""})),void T(t);var t}}),(null===G||void 0===G?void 0:G.fromDate)&&Object(B.jsx)("span",{className:"invalid-feedback d-inline-block",role:"alert",children:Object(B.jsx)("strong",{children:G.fromDate})})]}),Object(B.jsxs)("div",{className:"col",children:[Object(B.jsx)("label",{htmlFor:"toDate",className:"mb-0",children:Object(B.jsx)("small",{children:"To date"})}),Object(B.jsx)("input",{id:"toDate",className:"form-control",type:"date",value:V,onChange:function(e){return t=e.target.value,(null===G||void 0===G?void 0:G.toDate)&&J(Object(j.a)(Object(j.a)({},G),{},{toDate:""})),void A(t);var t}}),(null===G||void 0===G?void 0:G.toDate)&&Object(B.jsx)("span",{className:"invalid-feedback d-inline-block",role:"alert",children:Object(B.jsx)("strong",{children:G.toDate})})]})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-around form-group mb-0",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"Cancel"}),Object(B.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return Y.apply(this,arguments)},children:"Clear"}),Object(B.jsx)("button",{type:"submit",className:"btn btn-success",children:"Filter"})]})]})})]})})})},be=Object(c.createContext)({}),me=function(e){var t=e.children,a=Object(c.useState)([]),n=Object(b.a)(a,2),s=n[0],r=n[1],l=Object(c.useState)({}),i=Object(b.a)(l,2),o=i[0],j=i[1],m=Object(c.useContext)(ee).setPagination,p=Object(c.useCallback)(Object(u.a)(d.a.mark((function e(){var t,a,c,n,s,l,i,j,u,b,p,h,x,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(o);case 3:t=e.sent,a=t.data,c=t.current_page,n=t.first_page_url,s=t.from,l=t.last_page,i=t.last_page_url,j=t.links,u=t.next_page_url,b=t.path,p=t.per_page,h=t.prev_page_url,x=t.to,v=t.total,r(a),m({current_page:c,first_page_url:n,from:s,last_page:l,last_page_url:i,links:j,next_page_url:u,path:b,per_page:p,prev_page_url:h,to:x,total:v}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O.a.error("Fail to get uploads");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[o,m]),h=Object(c.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:return e.next=5,p();case 5:O.a.info("File uploaded"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O.a.error("Fail to upload file");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[p]),x=Object(c.useCallback)(Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.open(f+"/api/uploads/actions/get-sample-csv"),O.a.info("Sample downloaded")}catch(t){O.a.error("Fail to download sample")}case 1:case"end":return e.stop()}}),e)}))),[]);return Object(B.jsx)(be.Provider,{value:{uploads:s,filters:o,setFilters:j,getUploads:p,uploadCsv:h,donwnloadSample:x},children:t})},pe=function(){var e=Object(c.useContext)(be).uploadCsv,t=Object(c.useState)(void 0),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(null),l=Object(b.a)(r,2),i=l[0],o=l[1];function m(){return(m=Object(u.a)(d.a.mark((function t(a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(c=new FormData).append("file",n),t.next=5,e(c);case 5:$()("#uploadProductsCsvModal").modal("hide"),p();case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){s(void 0),$()("#file").val("")}return Object(B.jsx)("div",{className:"modal fade",id:"uploadProductsCsvModal",tabIndex:-1,"aria-labelledby":"uploadProductsCsvModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"uploadProductsCsvModalLabel",children:"Upload CSV"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("form",{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"file",children:"File"}),Object(B.jsx)("input",{type:"file",className:"form-control-file",id:"file",onChange:function(e){var t,a,c;return c=null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0],(null===i||void 0===i?void 0:i.file)&&o(Object(j.a)(Object(j.a)({},i),{},{file:void 0})),void s(c)}}),Object(B.jsx)("small",{id:"fileHelpBlock",className:"form-text text-muted",children:"File must be .csv < 10Mb size"})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-around form-group mb-0",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"Cancel"}),Object(B.jsx)("button",{type:"submit",className:"btn btn-success",children:"Upload"})]})]})})]})})})},Oe=function(){var e=Object(c.useContext)(ae).filters,t=Object(c.useContext)(ee).pagination,a=Object(c.useCallback)((function(){$()("#createProductModal").modal("show")}),[]),n=Object(c.useCallback)((function(){$()("#filterProductModal").modal("show")}),[]),s=Object(c.useCallback)((function(){return Object.keys(e).filter((function(e){return!["page","limit"].includes(e)})).length}),[e]),r=Object(c.useCallback)((function(){return t.total||0}),[t]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Z,{}),Object(B.jsxs)("main",{className:"container",children:[Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[Object(B.jsxs)("h4",{className:"mb-0",children:["Products List",Object(B.jsx)("span",{className:"badge bg-secondary ml-2",children:r()})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-center flex-wrap",children:[Object(B.jsxs)("button",{className:"btn btn-info m-1",onClick:n,children:[Object(B.jsx)(J.a,{icon:X.g,size:"1x",className:"mr-1"}),Object(B.jsx)("span",{className:"mr-1",children:"Filter"}),Object(B.jsx)("span",{className:"badge bg-secondary",children:s()})]}),Object(B.jsxs)("button",{className:"btn btn-success m-1",onClick:a,children:[Object(B.jsx)(J.a,{icon:X.i,size:"1x",className:"mr-1"}),"Create"]})]})]}),Object(B.jsx)(oe,{}),Object(B.jsx)(de,{})]}),Object(B.jsx)(je,{}),Object(B.jsx)(pe,{}),Object(B.jsx)(ue,{})]})},he=function(e){var t=e.upload;return Object(B.jsx)("div",{className:"modal fade",id:"viewUploadModal",tabIndex:-1,"aria-labelledby":"viewUploadModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"viewUploadModalLabel",children:"View Upload"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsxs)("div",{className:"modal-body",children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Id:"})," ",Object(B.jsx)("span",{children:t.id})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Path:"})," ",Object(B.jsx)("span",{children:t.path})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Size:"})," ",Object(B.jsx)("span",{children:t.size})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Type:"})," ",Object(B.jsx)("span",{children:t.type})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Status:"})," ",Object(B.jsx)("span",{children:t.status})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Creation date:"})," ",Object(B.jsx)("span",{children:new Date(t.created_at).toLocaleString()})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"font-weight-bold",children:"Last update date:"})," ",Object(B.jsx)("span",{children:new Date(t.updated_at).toLocaleString()})]})]})]})})})},xe=function(){var e=Object(c.useContext)(be),t=e.uploads,a=e.getUploads,n=Object(c.useState)({}),s=Object(b.a)(n,2),r=s[0],l=s[1];Object(c.useEffect)((function(){a()}),[a]);var i=Object(c.useCallback)((function(e){l(e),$()("#viewUploadModal").modal("show")}),[]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("table",{className:"table table-bordered table-striped table-hover table-responsive-sm",children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{className:"text-center",children:[Object(B.jsx)("th",{scope:"col",children:"Id"}),Object(B.jsx)("th",{scope:"col",children:"Path"}),Object(B.jsx)("th",{scope:"col",children:"Creation Date"}),Object(B.jsx)("th",{scope:"col",children:"Status"}),Object(B.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(B.jsx)("tbody",{children:t.map((function(e){return Object(B.jsxs)("tr",{className:"text-center",children:[Object(B.jsx)("th",{scope:"row",className:"text-center",children:e.id}),Object(B.jsx)("td",{children:e.path}),Object(B.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),Object(B.jsx)("td",{children:(t=e.status,"CREATED"===t?Object(B.jsx)(J.a,{icon:X.d,size:"2x",title:"Created",className:"text-info"}):"PROCESSED"===t?Object(B.jsx)(J.a,{icon:X.c,size:"2x",title:"Processed",className:"text-success"}):"ERROR"===t?Object(B.jsx)(J.a,{icon:X.j,size:"2x",title:"Error",className:"text-danger"}):Object(B.jsx)("span",{children:"'-'"}))}),Object(B.jsx)("td",{children:Object(B.jsx)("button",{className:"btn btn-sm btn-primary m-1",title:"View",onClick:function(){return i(e)},children:Object(B.jsx)(J.a,{icon:X.f,size:"1x"})})})]},e.id);var t}))})]}),Object(B.jsx)(he,{upload:r})]})},ve=function(){var e=Object(c.useContext)(be),t=e.uploadCsv,a=e.donwnloadSample,n=Object(c.useState)(void 0),s=Object(b.a)(n,2),r=s[0],l=s[1],i=Object(c.useState)(null),o=Object(b.a)(i,2),m=o[0],p=o[1];function O(){return(O=Object(u.a)(d.a.mark((function e(a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),(c=new FormData).append("file",r),e.next=5,t(c);case 5:$()("#uploadCsvModal").modal("hide"),x();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){l(void 0),$()("#file").val("")}return Object(B.jsx)("div",{className:"modal fade",id:"uploadCsvModal",tabIndex:-1,"aria-labelledby":"uploadCsvModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h5",{className:"modal-title",id:"uploadCsvModalLabel",children:"Upload CSV"}),Object(B.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(B.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"file",children:"File"}),Object(B.jsx)("input",{type:"file",className:"form-control-file",id:"file",onChange:function(e){var t,a,c;return c=null===(t=e.target)||void 0===t||null===(a=t.files)||void 0===a?void 0:a[0],(null===m||void 0===m?void 0:m.file)&&p(Object(j.a)(Object(j.a)({},m),{},{file:void 0})),void l(c)}}),Object(B.jsx)("small",{id:"fileHelpBlock",className:"form-text text-muted",children:"File must be .csv < 2Mb size"})]}),Object(B.jsxs)("button",{type:"button",className:"btn btn-link mb-3",onClick:function(){return h.apply(this,arguments)},children:[Object(B.jsx)(J.a,{icon:X.e,size:"1x",className:"mr-1"}),"Download sample"]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-around form-group mb-0",children:[Object(B.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"Cancel"}),Object(B.jsx)("button",{type:"submit",className:"btn btn-success",children:"Upload"})]})]})})]})})})},fe=function(){var e=Object(c.useContext)(ee).pagination,t=Object(c.useCallback)((function(){$()("#uploadCsvModal").modal("show")}),[]),a=Object(c.useCallback)((function(){return e.total||0}),[e]);return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Z,{}),Object(B.jsxs)("main",{className:"container",children:[Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[Object(B.jsxs)("h4",{className:"mb-0",children:["Uploads List",Object(B.jsx)("span",{className:"badge bg-secondary ml-2",children:a()})]}),Object(B.jsx)("div",{className:"d-flex align-items-center justify-content-center flex-wrap",children:Object(B.jsxs)("button",{className:"btn btn-secondary m-1",onClick:t,children:[Object(B.jsx)(J.a,{icon:X.l,size:"1x",className:"mr-1"}),"New"]})})]}),Object(B.jsx)(xe,{})]}),Object(B.jsx)(ve,{})]})},ge=a(95),Ne=function(e){var t=e.isPrivate,a=void 0!==t&&t,n=e.isGuest,s=void 0!==n&&n,r=e.component,l=Object(ge.a)(e,["isPrivate","isGuest","component"]),o=Object(c.useContext)(K).logged;return Object(B.jsx)(i.b,Object(j.a)(Object(j.a)({},l),{},{render:function(e){var t=e.location;return s&&o?Object(B.jsx)(i.a,{to:{pathname:"/",state:{from:t}}}):a&&!o?Object(B.jsx)(i.a,{to:{pathname:"login",state:{from:t}}}):Object(B.jsx)(r,{})}}))},ke=function(){return Object(B.jsxs)(i.d,{children:[Object(B.jsx)(Ne,{path:"/login",exact:!0,component:Y,isGuest:!0}),Object(B.jsx)(Ne,{path:"/",exact:!0,component:Oe,isPrivate:!0}),Object(B.jsx)(Ne,{path:"/uploads",exact:!0,component:fe,isPrivate:!0})]})};a(245),a(246),a(247);x.a.defaults.withCredentials=!0,x.a.defaults.headers={Accept:"application/json","Content-Type":"application/json"},O.a.configure({position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var we=function(){return Object(B.jsx)(l.a,{children:Object(B.jsx)(H,{children:Object(B.jsx)(te,{children:Object(B.jsx)(ce,{children:Object(B.jsx)(me,{children:Object(B.jsx)(ke,{})})})})})})},ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,251)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(B.jsx)(n.a.StrictMode,{children:Object(B.jsx)(we,{})}),document.getElementById("root")),ye()}},[[248,1,2]]]);
//# sourceMappingURL=main.80814db1.chunk.js.map